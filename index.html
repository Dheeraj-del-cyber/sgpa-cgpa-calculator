<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VTU SGPA & CGPA Calculator</title>

<style>
  body {
    font-family: system-ui, sans-serif;
    background: #f4f6fb;
    margin: 0;
    padding: 16px;
  }

  h1, h2 {
    text-align: center;
    color: #1f2937;
  }

  .container {
    max-width: 700px;
    margin: auto;
  }

  .card {
    background: white;
    border-radius: 14px;
    padding: 16px;
    margin-bottom: 20px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.08);
  }

  .header-row {
    display: grid;
    grid-template-columns: 0.4fr 1.4fr 0.6fr 0.6fr;
    gap: 8px;
    font-weight: 600;
    font-size: 14px;
    color: #374151;
    margin-bottom: 8px;
  }

  .row {
    display: grid;
    grid-template-columns: 0.4fr 1.4fr 0.6fr 0.6fr;
    gap: 8px;
    margin-bottom: 10px;
    align-items: center;
  }

  .index {
    text-align: center;
    font-weight: 600;
    color: #2563eb;
  }

  input {
    padding: 12px;
    border-radius: 10px;
    border: 1px solid #d1d5db;
    font-size: 15px;
  }

  input:focus {
    outline: none;
    border-color: #2563eb;
  }

  button {
    width: 100%;
    padding: 14px;
    border-radius: 12px;
    border: none;
    font-size: 16px;
    font-weight: 600;
    margin-top: 10px;
    cursor: pointer;
  }

  .add { background: #2563eb; color: white; }
  .sgpa { background: #16a34a; color: white; }
  .cgpa { background: #7c3aed; color: white; }

  .result {
    margin-top: 14px;
    padding: 16px;
    text-align: center;
    font-size: 20px;
    font-weight: bold;
    border-radius: 12px;
  }

  .green { background: #dcfce7; color: #166534; }
  .red { background: #fee2e2; color: #991b1b; }

  @media (max-width: 600px) {
    .header-row, .row {
      grid-template-columns: 1fr;
    }
    .index {
      text-align: left;
    }
  }
</style>
</head>

<body>

<div class="container">
  <h1>VTU SGPA & CGPA Calculator</h1>

  <div class="card">
    <h2>Subjects</h2>

      
  

    <div id="subjects"></div>

    <button class="add" onclick="addSubject()">âž• Add Subject</button>
    <button class="sgpa" onclick="calculateSGPA()">Calculate SGPA</button>
    <div id="sgpaResult" class="result"></div>
  </div>

  <div class="card">
    <h2>CGPA (from SGPAs)</h2>
    <input id="cgpaInput" placeholder="Example: 7.8, 8.2, 6.9">
    <button class="cgpa" onclick="calculateCGPA()">Calculate CGPA</button>
    <div id="cgpaResult" class="result"></div>
  </div>
</div>

<script>
  let count = 0;

  function addSubject() {
    count++;
    const row = document.createElement("div");
    row.className = "row";
    row.innerHTML = `
      <div class="index">${count}</div>
      <input placeholder="Subject ${count}">
      <input type="number" placeholder="Credits">
      <input type="number" placeholder="Marks">
    `;
    document.getElementById("subjects").appendChild(row);
    setupEnterNavigation();
  }

  addSubject();

  function setupEnterNavigation() {
    const inputs = document.querySelectorAll("#subjects input");
    inputs.forEach((input, i) => {
      input.onkeydown = (e) => {
        if (e.key === "Enter") {
          e.preventDefault();
          if (inputs[i + 1]) {
            inputs[i + 1].focus();
          } else {
            addSubject();
            setTimeout(() => {
              document.querySelectorAll("#subjects input")[inputs.length].focus();
            }, 0);
          }
        }
      };
    });
  }

  function gradePoint(m) {
    if (m >= 90) return 10;
    if (m >= 80) return 9;
    if (m >= 70) return 8;
    if (m >= 60) return 7;
    if (m >= 55) return 6;
    if (m >= 50) return 5;
    if (m >= 40) return 4;
    return 0;
  }

  function calculateSGPA() {
    const rows = document.querySelectorAll("#subjects .row");
    let credits = 0, total = 0;

    rows.forEach(r => {
      const c = Number(r.children[2].value);
      const m = Number(r.children[3].value);
      if (c) {
        credits += c;
        total += c * gradePoint(m);
      }
    });

    if (!credits) return;
    const sgpa = (total / credits).toFixed(2);
    show("sgpaResult", "SGPA: " + sgpa, sgpa);
  }

  function calculateCGPA() {
    const vals = document.getElementById("cgpaInput").value
      .split(",")
      .map(v => Number(v.trim()))
      .filter(v => !isNaN(v));

    if (!vals.length) return;
    const cgpa = (vals.reduce((a,b)=>a+b,0)/vals.length).toFixed(2);
    show("cgpaResult", "CGPA: " + cgpa, cgpa);
  }

  function show(id, text, value) {
    const el = document.getElementById(id);
    el.textContent = text;
    el.className = "result " + (value >= 7 ? "green" : "red");
  }
</script>

</body>
</html>